# –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è –¥–æ –¢–µ–º–∏ –ü–æ–≤–µ–¥—ñ–Ω–∫–æ–≤—ñ –ø–∞—Ç–µ—Ä–Ω–∏: –õ–∞–Ω—Ü—é–∂–æ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç–µ–π —Ç–∞ –ü–æ—Å–µ—Ä–µ–¥–Ω–∏–∫

## –û–ø–∏—Å –∑–∞–≤–¥–∞–Ω–Ω—è

–ú–µ—Ç–∞ —Ü—å–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É ‚Äî –∑–∞–∫—Ä—ñ–ø–∏—Ç–∏ –∑–Ω–∞–Ω–Ω—è –¥–≤–æ—Ö –ø–æ–≤–µ–¥—ñ–Ω–∫–æ–≤–∏—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤:  
- **–õ–∞–Ω—Ü—é–∂–æ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç–µ–π (Chain of Responsibility)**  
- **–ü–æ—Å–µ—Ä–µ–¥–Ω–∏–∫ (Mediator)**

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–æ–±–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON. –ö–æ–∂–µ–Ω –∑–∞–ø–∏—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫—É (–≤–∞–ª—ñ–¥–∞—Ü—ñ—é) —á–µ—Ä–µ–∑ –ª–∞–Ω—Ü—é–≥ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤, –ø—ñ—Å–ª—è —á–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ –ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫–∞ —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —Ñ–∞–π–ª. –£ —Ä–∞–∑—ñ –ø–æ–º–∏–ª–∫–∏ ‚Äî –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É —Ñ–∞–π–ª –≤—ñ–¥—Ö–∏–ª–µ–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ `rejected.jsonl`.

## –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–∞—Ç–µ—Ä–Ω—ñ–≤

### üß© –õ–∞–Ω—Ü—é–∂–æ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç–µ–π

–ö–æ–∂–µ–Ω —Ç–∏–ø –∑–∞–ø–∏—Å—É (`access_log`, `transaction`, `system_error`) –º–∞—î –æ–∫—Ä–µ–º–∏–π –ª–∞–Ω—Ü—é–≥ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤, —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å `AbstractHandler`.  
–û–±—Ä–æ–±–Ω–∏–∫–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å:
- –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ (`timestamp`, `userId`, `ip`, —Ç–æ—â–æ),
- –ø–∞—Ä—Å–∏–Ω–≥ —ñ –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—é –∑–Ω–∞—á–µ–Ω—å (`amount`, `currency`),
- –ø—ñ–¥–≥–æ—Ç–æ–≤–∫—É –¥–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è (–æ–±—Ä—ñ–∑–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–æ—â–æ).

### üß© –ü–æ—Å–µ—Ä–µ–¥–Ω–∏–∫

–ö–ª–∞—Å `ProcessingMediator` –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:
- —É—Å–ø—ñ—à–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ ‚Äî —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ (`.json`, `.csv`, `.jsonl`);
- –≤—ñ–¥—Ö–∏–ª–µ–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ ‚Äî —É `rejected.jsonl` —Ä–∞–∑–æ–º —ñ–∑ –æ–ø–∏—Å–æ–º –ø–æ–º–∏–ª–∫–∏.

## –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```bash
npm install
```

2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –æ–±—Ä–æ–±–∫—É –≤—Ö—ñ–¥–Ω–æ–≥–æ JSON-—Ñ–∞–π–ª—É:

```bash
npx ts-node src/main.ts
```

3. –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤ –ø–∞–ø—Ü—ñ `src/output/` –∑'—è–≤–ª—è—Ç—å—Å—è —Ñ–∞–π–ª–∏:
- `access_logs.json`
- `transactions.csv`
- `errors.jsonl`
- `rejected.jsonl`

4. –£ –∫–æ–Ω—Å–æ–ª—ñ –∑ º—è–≤–∏—Ç—å—Å—è –∑–≤—ñ—Ç:

```
[INFO] –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –∑–∞–ø–∏—Å—ñ–≤: 19
[INFO] –£—Å–ø—ñ—à–Ω–æ –æ–±—Ä–æ–±–ª–µ–Ω–æ: 9
[WARN] –í—ñ–¥—Ö–∏–ª–µ–Ω–æ –∑ –ø–æ–º–∏–ª–∫–∞–º–∏: 10
[INFO] –ó–≤—ñ—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó output/
```

## –Ø–∫ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π —Ç–∏–ø –∑–∞–ø–∏—Å—É

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É `models/DataRecord.ts`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

```ts
export interface AuditRecord extends BaseRecord {
  type: "audit_log";
  action: string;
}
```

2. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π –ª–∞–Ω—Ü—é–≥ —É `chain/chains/AuditLogChain.ts`, —Ä–µ–∞–ª—ñ–∑—É–π—Ç–µ –æ–±—Ä–æ–±–Ω–∏–∫–∏ —É `handlers/`.

3. –î–æ–¥–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ writer —É `mediator/writers/AuditLogWriter.ts`.

4. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ –Ω–æ–≤–∏–π —Ç–∏–ø —É:
- `handlerMap` —É `main.ts`
- `ProcessingMediator` (–æ–Ω–æ–≤–∏—Ç–∏ `writerMap`)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
neo-design-patterns-hw-11/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ records.json
‚îú‚îÄ‚îÄ chain/
‚îÇ   ‚îú‚îÄ‚îÄ AbstractHandler.ts
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îî‚îÄ‚îÄ chains/
‚îú‚îÄ‚îÄ mediator/
‚îÇ   ‚îú‚îÄ‚îÄ ProcessingMediator.ts
‚îÇ   ‚îî‚îÄ‚îÄ writers/
‚îú‚îÄ‚îÄ output/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ DataRecord.ts
‚îî‚îÄ‚îÄ main.ts
```

‚úÖ –ü—Ä–æ—î–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –ø—Ä–∞–∫—Ç–∏—á–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞—Ç–µ—Ä–Ω—ñ–≤ —Ç–∞ –≥–Ω—É—á–∫—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö.
